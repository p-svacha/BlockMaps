Walls adjacent to vision blocking entities should be visible if node is visible
	maybe make walls on explored nodes also explored by default

Bug: Doors are still bugged, vision colliders are at wrong rotations
Bug: Seeing an airnode from below should only mark it as explored, not visible
Bug: Should not  be able to see/explore entities that are on top of air nodes that you are below (else you see stuff a floor higher than you)
Bug: In RoomPerspective cutoff mode, sometimes the edge of walls that should be invisible because of perspective still get rendered because adjacent wall does too (fog of war overlap)


Entity Pivot:
entities have an additional PivotDirection (SW, SE, NW, NE). Default is SW
	it defines what corner of the entity OriginNode represents
	adapt GetOccupiednodes and GetWorldPosition to support this new system
	when implemented, remove/make optional requirement that footprint needs to be fully connected. If it's not, then these just don't get added to occupied nodes
		i need this i.e. so that rocks can clip into cliffs
		THEN ALSO CHECK in blockmapnode.isImpassable if another nearby entity blocks this node according to its pivot, size and shape

Increase performance of detecting climb transitions on empty perlin map
maybe also other steps
Goal: 512 x 512 map (32 chunks) in 10 seconds preferred, 20 max. Now it takes like 50

fix arc for hop transitions - arc always has a height of 1 and going further down/up is just straight

Walls and Fences should be entities - climbability should be an inherent part of entities

45Â° angles for walls and surfaces, would be make round shapes and corners way nicer



--- Entity Nodes

make it possible to define invisible EntityNodes per entity
	> List<EntityNodeData>, where key is the local cell and value is the node altitudes
	> Can be defined up to 1 higher than entity height (like a crate has height 2, but a node could be defined at (0/2/0) with altitude (0,0,0,0) to make it walkable on top)
	> if it is forbid placing airnodes there
	> maybe an easy option to just add entity nodes everywhere at the top of the entity

EntityNodeData:
	Vector3Int pos, Dictionary<Direction, int> altitude, SurfaceDef surface

vision of entity node is based on entity
add HoveredEntityNode to world
	> make it possible to add fences/other entites on EntityNodes 

same with invisible EntityWalls for climbability
	> List<EntityWallData>
	> EntityWallData = Vector2Int + Direction + WallMaterialDef

---

give everyone names
turn counter and display

mapgen forest: don't replace concrete with dirt path
mapgen forest: wide road with cars
mapgen forest: river
mapgen forest: hedges should be straighter

--- Entity Update

- Allow static entities to be able to allow having moving entities on them
	> requires jumping update
	> add container

- Show entity stats in static entity tool in editor
	> same way as moving entities
	> IsPassable, BlocksVision, Dimensions, RequiresFlatTerrain

- Make vision radius of entities based on their dimensions

- Static entities types: Like high grass, maize, foliage, debris, puddle
	> multiple static entities per node: one per type

- Add static entities that include navmesh nodes (like a container or bridge)

---

--- New cover layer for Nodes (for EcosystemSimulation)

New CoverLayerDef
nodes can have different layers stacked on top of each other
examples are AutumnLeaves, Snow, Moss

---

Framework: Make vision system optional
	i.e. Ecosystem sim won't need it / can't afford its performance cost


- Add MaxSteepness movement attribute and disallow walking on very steep nodes

- Expand entity shapes
	> Rework dimensions attribute of entities
	> Add new EntityShape class/struct
	> Each node within dimensions has a defined vision hitbox that can be [Full/None/Wall_N/E/S/W]
	> make it possible that entities can block a combination of full nodes, sides and corners
	> Impact vision
	> Impact navmesh

- Allow entites to have their own nodes
---

- Editor-Bug: Decreasing tool size in ground sculpting doesn't remove overlay over previous chunks
- Editor-Feature: World Generation Tool: Expand by x chunks in direction

- Editor improvements:
	> pipette: press a button when hovering a wall/air node/fence etc. to instantly switch selection to that type
	> wall height
	> wall tool: click on existing wall to change shape/material (as long as side is valid for selected shape)
	> air node drag
	> proc entity drag
	> fence drag (same side along direction, i.e. if placed east you can drag along x axis and always place east)
	> tunnel (convert ground node with all walls, entites etc to air node and create new grass ground node 1 below)


Rework shader for entities
 - Allow option to use uv space instead of world space
	> Apply this to doors

Make a list of material indexes colorable in editor
 - Save color in new attribute Color in entity and EntityData
 - all materials with an index present in the list will be given that color
 - Use for cars

 Water improvements
- Water shader (very small transparency, moving, foam when hitting terrain)
- Water flowing in one direction
- Waterfall
- water tool rework:
	> make max depth a const 3
	> make shoreheight based on mouse pointer y coordinate

Animation system for walking / climbing entities
	> silly with just hopping from one side to the other with slight rotation

Sounds

Add "DrawSlopeAsStairs" to SurfaceDef.Renderproperties
	If true, all slopes (IsSlope = true) are drawn as stairs in DrawNodeSurface()

- strength & destroy
	> movingentities get a new strength attribute
	> staticentities get a new durability attribute
	> walls get it too
	> entities can destroy for big stamina cost



Framework: fix: water fill algorithm should stop after a while (like 1000 tiles?)

- add new item framework
	- items behave like static entities on map, but way more limited
	- only one 1 tile, no vision, movement etc.

- add inventory system
	- entities can pick up and carry items
	- add carry capacity attribute to entities

- sound & smell
	hearing & smelling



- dig/tunnel?

- Add additional movement methods (jump/fly)
- Stealth/Invisibility
- Teleportation

- Weather / Temperature (Snow/Mud)

More static entities (see following for inspiration):
	> project zomboid streams
	> fallout tactics streams


-------- POSSIBLE PROJECT IDEAS WITH FRAMEWORK --------

- EcosystemSimulation3D
- Solo/Squad RPG (like CDDA)
- Ironmon-like roguelike


-------- KNOWN ISSES --------

Camera MSAA Anti-Aliasing is causing black pixel artifacts on air node mesh seams that use the surface shader
	> so MSAA is turned off for now

Surface blending in SurfaceShader isn't perfect (but good enough so it's usually not noticable)

-------- RETIRED IDEAS ------------

- Shoot multiple rays at a node to check vision (if performance allows)
	> also at entities on node

- Allow movingentities bigger than 1x1

Add a dissolve cutout feature to NodeMaterialShader that can dissolve an area around a specific screen space coordinate:
 - https://glowfishinteractive.com/dissolving-the-world-part-1/